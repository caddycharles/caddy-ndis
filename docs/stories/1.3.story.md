# Story 1.3: UI Foundation

## Status
Approved

## Story
**As a** User  
**I want** to see a consistent, responsive interface  
**So that** I can use the app on any device  

## Acceptance Criteria
1. Shadcn UI components installed
2. Tailwind CSS configured
3. Base layout components created
4. Theme provider implemented
5. Mobile responsive design working

## Tasks / Subtasks

- [ ] Install and configure Shadcn UI (AC: 1)
  - [ ] Run `npx shadcn-ui@latest init` to initialize Shadcn
  - [ ] Choose style options: New York style, Slate base color, CSS variables for colors
  - [ ] Configure components.json with proper import paths
  - [ ] Install initial core components: button, card, dialog, input, label, table
  - [ ] Verify component installation in src/components/ui/

- [ ] Configure Tailwind CSS with design system (AC: 2)
  - [ ] Ensure Tailwind CSS is properly configured from Story 1.1
  - [ ] Update tailwind.config.js with Caddy color palette
  - [ ] Add custom gradient utilities for brand colors
  - [ ] Configure spacing scale based on 4px/8px base unit
  - [ ] Add custom font family configuration for Inter
  - [ ] Set up CSS variables for theme colors in globals.css

- [ ] Create base layout components (AC: 3)
  - [ ] Create src/components/layouts/app-layout.tsx with sidebar and header
  - [ ] Create src/components/layouts/sidebar.tsx with navigation
  - [ ] Create src/components/layouts/header.tsx with user menu
  - [ ] Implement responsive mobile menu with hamburger toggle
  - [ ] Add route-based active state highlighting
  - [ ] Integrate with Clerk user context from Story 1.2

- [ ] Implement theme provider and dark mode (AC: 4)
  - [ ] Install next-themes package for theme management
  - [ ] Create theme provider wrapper in src/components/theme-provider.tsx
  - [ ] Add theme provider to __root.tsx layout
  - [ ] Create theme toggle component with light/dark/system options
  - [ ] Configure CSS variables for both light and dark themes
  - [ ] Test theme persistence in localStorage

- [ ] Configure responsive breakpoints and mobile design (AC: 5)
  - [ ] Set up Tailwind breakpoints: sm(640px), md(768px), lg(1024px), xl(1280px)
  - [ ] Create responsive navigation with mobile drawer
  - [ ] Implement touch-friendly button sizes (min 44px touch targets)
  - [ ] Add responsive grid layouts for different screen sizes
  - [ ] Create mobile-optimized card layouts
  - [ ] Test on various viewport sizes using dev tools

- [ ] Apply Caddy design system styling (AC: 2, 3)
  - [ ] Implement primary gradient backgrounds from design system
  - [ ] Apply card styling with proper shadows and borders
  - [ ] Configure button variants matching design patterns
  - [ ] Set up form input styling with 52px height standard
  - [ ] Add hover and focus states with micro-interactions
  - [ ] Implement loading states and skeleton screens

- [ ] Set up typography and spacing system (AC: 2)
  - [ ] Configure Inter font family with proper weights
  - [ ] Set up type scale based on design system
  - [ ] Implement consistent spacing using Tailwind classes
  - [ ] Create text utility classes for common patterns
  - [ ] Add responsive font sizing for mobile

- [ ] Add accessibility features (AC: 3, 5)
  - [ ] Ensure WCAG 2.1 AA color contrast compliance
  - [ ] Add proper focus indicators for keyboard navigation
  - [ ] Implement ARIA labels and roles where needed
  - [ ] Test with keyboard-only navigation
  - [ ] Add skip-to-content link for screen readers

- [ ] Create initial page layouts (AC: 3)
  - [ ] Update routes/__root.tsx with app layout wrapper
  - [ ] Update routes/index.tsx with dashboard placeholder
  - [ ] Add protected route wrapper using auth from Story 1.2
  - [ ] Create consistent page header component
  - [ ] Add breadcrumb navigation component

- [ ] Testing and verification
  - [ ] Test responsive design on mobile, tablet, desktop viewports
  - [ ] Verify theme switching works correctly
  - [ ] Check all Shadcn components render properly
  - [ ] Test layout components with different content lengths
  - [ ] Verify accessibility with axe DevTools
  - [ ] Test on actual mobile devices if available

## Dev Notes

### Previous Story Context
**Story 1.2 completed with:**
- Clerk authentication integrated with user context available
- Protected routes implemented with auth middleware
- User roles and permissions system in place
- Routes structure established in src/routes/

### UI Technology Stack
**[Source: docs/architecture/technology-stack.md#frontend-stack]**

Styling technologies to use:
- Tailwind CSS 3.x for utility-first CSS
- Shadcn/ui for component library (built on Radix UI)
- CSS Modules for component isolation when needed
- CVA (class-variance-authority) for component variants
- Lucide Icons for iconography

### Frontend Project Structure
**[Source: docs/architecture/frontend-architecture.md#project-structure]**

Files to create/modify:
```
src/
├── routes/
│   └── __root.tsx          # Add app layout wrapper and theme provider
├── components/
│   ├── ui/                 # Shadcn components auto-installed here
│   │   ├── button.tsx
│   │   ├── card.tsx
│   │   ├── dialog.tsx
│   │   └── ...
│   ├── layouts/
│   │   ├── app-layout.tsx  # Main app shell
│   │   ├── sidebar.tsx     # Navigation sidebar
│   │   └── header.tsx      # App header with user menu
│   └── theme-provider.tsx  # Theme context provider
└── styles/
    ├── globals.css         # Global styles and CSS variables
    └── tailwind.css        # Tailwind imports
```

### Design System Colors
**[Source: docs/ui-design-system/color-palette.md]**

Primary brand colors to implement:
```css
/* Primary Gradient - Signature look */
--gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
--color-primary-light: #667eea;
--color-primary-dark: #764ba2;

/* Semantic colors for states */
--color-success: #10b981;
--color-error: #ef4444;
--color-warning: #f59e0b;

/* Neutral grays for text and backgrounds */
--color-gray-900 through --color-gray-50
```

### Component Patterns
**[Source: docs/ui-design-system/component-patterns.md]**

Key styling patterns:
- Cards: 16px border radius, prominent shadow (0 25px 50px -12px rgba(0,0,0,0.25))
- Primary buttons: 52px height, gradient background, hover transform
- Form inputs: 52px height standard, 16px padding
- Border radius: 10px for buttons, 16px for cards

### Design Philosophy
**[Source: docs/ui-design-system/design-philosophy.md]**

Core principles to follow:
1. Trust through consistency - familiar patterns
2. Progressive disclosure - show what's needed
3. Delightful micro-interactions - subtle animations
4. Mobile-first design - optimize for touch
5. WCAG 2.1 AA accessibility compliance

### Responsive Breakpoints
**[Source: docs/ui-design-system/responsive-breakpoints.md]**

Tailwind breakpoint configuration:
- Mobile: < 640px (default, mobile-first)
- Tablet: sm: 640px, md: 768px
- Desktop: lg: 1024px, xl: 1280px, 2xl: 1536px

### Layout Components Context
**[Source: docs/architecture/frontend-architecture.md#routing-strategy]**

The __root.tsx file should wrap the app with:
1. ClerkProvider (from Story 1.2)
2. ConvexProvider (from Story 1.1)
3. ThemeProvider (this story)
4. AppLayout component (this story)

### Theme Implementation
**[Source: docs/architecture/frontend-architecture.md#state-management-architecture]**

Theme state should be managed locally using:
- next-themes for theme persistence
- CSS variables for color theming
- System preference detection
- localStorage for user preference

### Testing Requirements
No specific UI testing framework configured yet. For this story:
- Manual testing of responsive layouts
- Visual regression testing deferred to later story
- Accessibility testing with browser tools
- Component testing will be set up in future story

### Dependencies
This story depends on:
- Story 1.1: TanStack Start project initialized ✅
- Story 1.2: Authentication context available ✅

Next stories will depend on:
- UI component library available
- Consistent theming system
- Responsive layout foundation

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-01-13 | 1.0 | Initial story creation | Create Next Story Task |
| 2025-01-13 | 1.1 | Approved for implementation | Sarah (Product Owner) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*To be filled by QA agent after implementation*